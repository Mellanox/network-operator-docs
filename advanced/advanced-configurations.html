<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Configurations &mdash; NVIDIA Network Operator v25.01.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="../_static/api-styles.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/mermaid-init.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/version.js"></script>
        <script src="../_static/social-media.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="NVIDIA DOCA Driver Container" href="doca-drivers.html" />
 


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


<a href="../index.html">
  <img src="../_static/nvidia-logo-white.png" class="logo" alt="Logo"/>
</a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA Network Operator</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform-support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-kubernetes.html">Getting Started with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-openshift.html">Getting Started with Red Hat OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customizations/customization.html">Customization Options and CRDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../life-cycle-management.html">Life Cycle Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="advanced.html">Advanced Configurations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="proxy-airgapped.html">Proxy &amp; Air-gapped</a></li>
<li class="toctree-l2"><a class="reference internal" href="doca-drivers.html">DOCA Driver Container</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Other Advanced Configurations</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NVIDIA Network Operator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">


<li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
  
    <li><a href="advanced.html">Advanced Configurations</a> &raquo;</li>
<li>Advanced Configurations</li>

      <li class="wy-breadcrumbs-aside">
      </li>
<li class="wy-breadcrumbs-aside">

  <span>&nbsp;</span>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced-configurations">
<h1>Advanced Configurations<a class="headerlink" href="#advanced-configurations" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#network-operator-deployment-with-admission-controller" id="id1">Network Operator Deployment with Admission Controller</a></p></li>
<li><p><a class="reference internal" href="#network-operator-deployment-with-pod-security-admission" id="id2">Network Operator Deployment with Pod Security Admission</a></p></li>
<li><p><a class="reference internal" href="#container-resources" id="id3">Container Resources</a></p></li>
</ul>
</div>
<section id="network-operator-deployment-with-admission-controller">
<h2>Network Operator Deployment with Admission Controller<a class="headerlink" href="#network-operator-deployment-with-admission-controller" title="Permalink to this headline"></a></h2>
<p>The Admission Controller can be optionally included as part of the Network Operator installation process. It has the capability to validate supported Custom Resource Definitions (CRDs), which currently include NicClusterPolicy and HostDeviceNetwork.
By default, the deployment of the admission controller is disabled. To enable it, you must set <code class="docutils literal notranslate"><span class="pre">operator.admissionController.enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>Enabling the admission controller provides you with two options for managing certificates. You can either utilize the <a class="reference external" href="https://cert-manager.io/docs/installation/">cert-manager</a> for generating a self-signed certificate automatically, or, alternatively, provide your own self-signed certificate.</p>
<p>To use cert-manager, ensure that <code class="docutils literal notranslate"><span class="pre">operator.admissionController.useCertManager</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Additionally, make sure that you deploy the cert-manager before initiating the Network Operator deployment.</p>
<p>If you prefer not to use the cert-manager, set <code class="docutils literal notranslate"><span class="pre">operator.admissionController.useCertManager</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>, and then provide your custom certificate and key using <code class="docutils literal notranslate"><span class="pre">operator.admissionController.certificate.tlsCrt</span></code> and <code class="docutils literal notranslate"><span class="pre">operator.admissionController.certificate.tlsKey</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using your own certificate, the certificate must be valid for <code class="docutils literal notranslate"><span class="pre">&lt;Release_Name&gt;-webhook-service.&lt;Release_Namespace&gt;.svc</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">network-operator-webhook-service.nvidia-network-operator.svc</span></code>.</p>
</div>
</section>
<section id="network-operator-deployment-with-pod-security-admission">
<h2>Network Operator Deployment with Pod Security Admission<a class="headerlink" href="#network-operator-deployment-with-pod-security-admission" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://kubernetes.io/docs/concepts/security/pod-security-admission/">Pod Security admission</a> controller replaces PodSecurityPolicy, enforcing predefined Pod Security Standards by adding a label to a namespace.</p>
<p>There are three levels defined by the <a class="reference external" href="https://kubernetes.io/docs/concepts/security/pod-security-standards">Pod Security Standards</a> : <code class="docutils literal notranslate"><span class="pre">privileged</span></code> , <code class="docutils literal notranslate"><span class="pre">baseline</span></code> and <code class="docutils literal notranslate"><span class="pre">restricted</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In case you wish to enforce a PSA to the Network Operator namespace, the <code class="docutils literal notranslate"><span class="pre">privileged</span></code> level is required. Enforcing <code class="docutils literal notranslate"><span class="pre">baseline</span></code> or <code class="docutils literal notranslate"><span class="pre">restricted</span></code> levels will prevent the creation of required Network Operator pods.</p>
</div>
<p>If required, enforce PSA privileged level on the Network Operator namespace by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl label --overwrite ns nvidia-network-operator  pod-security.kubernetes.io/enforce<span class="o">=</span>privileged
</pre></div>
</div>
<p>In case that baseline or restricted levels are being enforced on the Network Operator namespace, events for pods creation failures will be triggered:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get events -n nvidia-network-operator --field-selector <span class="nv">reason</span><span class="o">=</span>FailedCreate
LAST SEEN TYPE    REASON       OBJECT                         MESSAGE
2m36s     Warning FailedCreate daemonset/mofed-ubuntu22.04-ds Error creating: pods <span class="s2">&quot;mofed-ubuntu22.04-ds-rwmgs&quot;</span> is forbidden: violates PodSecurity <span class="s2">&quot;baseline:latest&quot;</span>: host namespaces <span class="o">(</span><span class="nv">hostNetwork</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span>, hostPath volumes <span class="o">(</span>volumes <span class="s2">&quot;run-mlnx-ofed&quot;</span>, <span class="s2">&quot;etc-network&quot;</span>, <span class="s2">&quot;host-etc&quot;</span>, <span class="s2">&quot;host-usr&quot;</span>, <span class="s2">&quot;host-udev&quot;</span><span class="o">)</span>, privileged <span class="o">(</span>container <span class="s2">&quot;mofed-container&quot;</span> must not <span class="nb">set</span> securityContext.privileged<span class="o">=</span><span class="nb">true</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="container-resources">
<h2>Container Resources<a class="headerlink" href="#container-resources" title="Permalink to this headline"></a></h2>
<p>Optional <a class="reference external" href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">requests and limits</a> can be configured for each component of the sub-resources deployed by the Network Operator by setting the parameter <code class="docutils literal notranslate"><span class="pre">containerResources</span></code>.</p>
<p>For example, for the SR-IOV Device Plugin:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NicClusterPolicy</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic-cluster-policy</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">sriovDevicePlugin</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">containerResources</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sriov-device-plugin&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">requests</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200m&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;150Mi&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">limits</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300m&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300Mi&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, NVIDIA.
      <span class="lastupdated">Last updated on Jan 20, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>